"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.default=exports.AUmainNavContent=void 0;var _react=_interopRequireDefault(require("react"));var _propTypes=_interopRequireDefault(require("prop-types"));var _animate=_interopRequireDefault(require("@gov.au/animate"));var _linkList=_interopRequireDefault(require("@gov.au/link-list"));require("../css/styles.css");function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function _extends(){_extends=Object.assign||function(target){for(var i=1;i<arguments.length;i++){var source=arguments[i];for(var key in source){if(Object.prototype.hasOwnProperty.call(source,key)){target[key]=source[key]}}}return target};return _extends.apply(this,arguments)}function _typeof(obj){if(typeof Symbol==="function"&&typeof Symbol.iterator==="symbol"){_typeof=function _typeof(obj){return typeof obj}}else{_typeof=function _typeof(obj){return obj&&typeof Symbol==="function"&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":typeof obj}}return _typeof(obj)}function _objectWithoutProperties(source,excluded){if(source==null)return{};var target=_objectWithoutPropertiesLoose(source,excluded);var key,i;if(Object.getOwnPropertySymbols){var sourceSymbolKeys=Object.getOwnPropertySymbols(source);for(i=0;i<sourceSymbolKeys.length;i++){key=sourceSymbolKeys[i];if(excluded.indexOf(key)>=0)continue;if(!Object.prototype.propertyIsEnumerable.call(source,key))continue;target[key]=source[key]}}return target}function _objectWithoutPropertiesLoose(source,excluded){if(source==null)return{};var target={};var sourceKeys=Object.keys(source);var key,i;for(i=0;i<sourceKeys.length;i++){key=sourceKeys[i];if(excluded.indexOf(key)>=0)continue;target[key]=source[key]}return target}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function")}}function _defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if("value"in descriptor)descriptor.writable=true;Object.defineProperty(target,descriptor.key,descriptor)}}function _createClass(Constructor,protoProps,staticProps){if(protoProps)_defineProperties(Constructor.prototype,protoProps);if(staticProps)_defineProperties(Constructor,staticProps);return Constructor}function _possibleConstructorReturn(self,call){if(call&&(_typeof(call)==="object"||typeof call==="function")){return call}return _assertThisInitialized(self)}function _getPrototypeOf(o){_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function _getPrototypeOf(o){return o.__proto__||Object.getPrototypeOf(o)};return _getPrototypeOf(o)}function _assertThisInitialized(self){if(self===void 0){throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return self}function _inherits(subClass,superClass){if(typeof superClass!=="function"&&superClass!==null){throw new TypeError("Super expression must either be null or a function")}subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,writable:true,configurable:true}});if(superClass)_setPrototypeOf(subClass,superClass)}function _setPrototypeOf(o,p){_setPrototypeOf=Object.setPrototypeOf||function _setPrototypeOf(o,p){o.__proto__=p;return o};return _setPrototypeOf(o,p)}/**
 * A menu inside the AUmainNav
 *
 * @param  {array}  items            - The links in an array containing text, location and active status
 * @param  {string} linkComponent    - The component used for the link
 */var AUmainNavMenu=function AUmainNavMenu(_ref){var items=_ref.items,linkComponent=_ref.linkComponent;// Generate the menu
var GenerateMenu=function GenerateMenu(items){var menu=items.map(function(item){var link=item.active?{link:item.link,text:item.text,"aria-current":"page",li:{className:"active"}}:{link:item.link,text:item.text};// return the link, maybe with children
return link});return menu};// Create the menu with children
return _react.default.createElement(_linkList.default,{items:GenerateMenu(items),linkComponent:linkComponent})};AUmainNavMenu.propTypes={items:_propTypes.default.arrayOf(_propTypes.default.shape({link:_propTypes.default.string,text:_propTypes.default.node.isRequired,children:_propTypes.default.array})).isRequired,linkComponent:_propTypes.default.oneOfType([_propTypes.default.string,_propTypes.default.func])};AUmainNavMenu.defaultProps={linkComponent:"a"};// This value gets increased for each navigation component
var IDvalue=0;var AUmainNavContent=/*#__PURE__*/function(_React$PureComponent){_inherits(AUmainNavContent,_React$PureComponent);function AUmainNavContent(props){var _this;_classCallCheck(this,AUmainNavContent);_this=_possibleConstructorReturn(this,_getPrototypeOf(AUmainNavContent).call(this,props));var items=props.items,_props$className=props.className,className=_props$className===void 0?"":_props$className,children=props.children,linkComponent=props.linkComponent,onOpen=props.onOpen,afterOpen=props.afterOpen,onClose=props.onClose,afterClose=props.afterClose,attributeOptions=_objectWithoutProperties(props,["items","className","children","linkComponent","onOpen","afterOpen","onClose","afterClose"]);// Functions
_this.toggleClasses=_this.toggleClasses.bind(_assertThisInitialized(_this));_this.removeClass=_this.removeClass.bind(_assertThisInitialized(_this));_this.addClass=_this.addClass.bind(_assertThisInitialized(_this));_this.mainNavToggle=_this.mainNavToggle.bind(_assertThisInitialized(_this));_this.toggle=_this.toggle.bind(_assertThisInitialized(_this));_this.toggleAnimationState=function(){this.setState({animating:!this.state.animating})}.bind(_assertThisInitialized(_this));// Event listeners
_this.auFocusTrapListenerTop=_this.auFocusTrapListenerTop.bind(_assertThisInitialized(_this));_this.auFocusTrapListenerBottom=_this.auFocusTrapListenerBottom.bind(_assertThisInitialized(_this));_this.auKeyListener=_this.auKeyListener.bind(_assertThisInitialized(_this));// Variables
_this.state={closed:true,animating:false};// Increase the ID so it's unique for each instance
IDvalue+=1;_this.id="au-main-nav-".concat(IDvalue);return _this}/**
	 * Toggle an main navigation on click
	 *
	 * @param  {event object} event - The event object of the click
	 */_createClass(AUmainNavContent,[{key:"toggle",value:function toggle(event){event.preventDefault();// If the main menu is animating don't change toggle the menu
if(this.state.animating){return}// Toggle the menu's current state
this.setState({closed:!this.state.closed,animating:true})}/**
	 * componentDidUpdate - Update the component when it changes
	 *
	 * @param {*} prevProps - The previous property values
	 * @param {*} prevState - The previous state values
	 */},{key:"componentDidUpdate",value:function componentDidUpdate(prevProps,prevState){if(prevState!==undefined&&this.state!==undefined&&this.state.closed!==prevState.closed){this.mainNavToggle(this.mainNavContent,this.props.speed,{onOpen:this.props.onOpen,afterOpen:this.props.afterOpen,onClose:this.props.onClose,afterClose:this.props.afterClose})}}/**
	 * IE8 compatible function for replacing classes on a DOM node
	 *
	 * @param  {object} element       - The DOM element we want to toggle classes on
	 * @param  {string} openingClass  - The firstClass you want to toggle on the DOM node
	 * @param  {string} closingClass  - The secondClass you want to toggle on the DOM node
	 */},{key:"toggleClasses",value:function toggleClasses(element,state,openingClass,closingClass){if(state==="opening"||state==="open"){var oldClass=openingClass||"au-main-nav__content--closed";var newClass=closingClass||"au-main-nav__content--open"}else{var oldClass=closingClass||"au-main-nav__content--open";var newClass=openingClass||"au-main-nav__content--closed"}this.removeClass(element,oldClass);this.addClass(element,newClass)}/**
	 * IE8 compatible function for removing a class
	 *
	 * @param  {object} element   - The DOM element we want to manipulate
	 * @param  {object} className - The name of the class to be removed
	 */},{key:"removeClass",value:function removeClass(element,className){if(element.classList){element.classList.remove(className)}else{element.className=element.className.replace(new RegExp("(^|\\b)"+className.split(" ").join("|")+"(\\b|$)","gi")," ")}}/**
	 * IE8 compatible function for adding a class
	 *
	 * @param  {object} element   - The DOM element we want to manipulate
	 * @param  {object} className - The name of the class to be added
	 */},{key:"addClass",value:function addClass(element,className){if(element.classList){element.classList.add(className)}else{element.className=element.className+" "+className}}/**
	 * auFocusTrapListenerTop - What happens when the focus trap top gets focus
	 *
	 * @param {event} event - the event
	 */},{key:"auFocusTrapListenerTop",value:function auFocusTrapListenerTop(event){var focusContent=this.mainNavMenu.querySelectorAll("a, .au-main-nav__toggle");focusContent[focusContent.length-1].focus()}/**
	 * auFocusTrapListenerBottom - What happens when the focus trap bottom gets focus
	 *
	 * @param {event} event - the event
	 */},{key:"auFocusTrapListenerBottom",value:function auFocusTrapListenerBottom(event){var focusContent=this.mainNavMenu.querySelectorAll("a, .au-main-nav__toggle");focusContent[0].focus()}/**
	 * auKeyListener - What happens when a key gets pressed and the menu is open
	 *
	 * @param {event} event - the event
	 */},{key:"auKeyListener",value:function auKeyListener(event){// This should only close the menu when the menu is visibly open
var overlayOpen=window.getComputedStyle(this.mainNavOverlay).getPropertyValue("display");// Check the menu is open and visible and the escape key is pressed
if(event.keyCode===27&&overlayOpen==="block"){this.toggle(event)}}/**
	 * Toggle a mainNav element
	 *
	 * @param  {string}  element  - The toggle for the main nav
	 * @param  {integer} speed    - The speed in ms for the animation
	 *
	 */},{key:"mainNavToggle",value:function mainNavToggle(element,speed,callbacks){// stop event propagation
try{window.event.cancelBubble=true;event.stopPropagation()}catch(error){}// check this once
if(_typeof(callbacks)!="object"){callbacks={}}// Elements we modify
var menu=this.mainNavMenu;var overlay=this.mainNavOverlay;var closeButton=element.querySelector(".au-main-nav__toggle--close");var openButton=element.querySelector(".au-main-nav__toggle--open");var focustrapTop=element.querySelector(".au-main-nav__focus-trap-top");var focustrapBottom=element.querySelector(".au-main-nav__focus-trap-bottom");var closed=!this.state.closed;var state=closed?"opening":"";var menuWidth=menu.offsetWidth;// Functions
var ToggleClasses=this.toggleClasses;var AUkeyListener=this.auKeyListener;var AUfocusTrapListenerTop=this.auFocusTrapListenerTop;var AUfocusTrapListenerBottom=this.auFocusTrapListenerBottom;var ToggleAnimationState=this.toggleAnimationState;overlay.style.display="block";(function(menu){_animate.default.animate.Toggle({element:menu,property:"left",openSize:0,closeSize:-1*menuWidth,speed:speed||250,prefunction:function prefunction(){// Set these value immediately for transitions
if(state==="opening"){menu.style.display="block";overlay.style.left=0;overlay.style.opacity=0.5;// run when opening
if(typeof callbacks.onOpen==="function"){callbacks.onOpen()}}else{overlay.style.opacity="0";// run when closing
if(typeof callbacks.onClose==="function"){callbacks.onClose()}}},postfunction:function postfunction(){if(state==="opening"){// Move the focus to the close button
closeButton.focus();// Focus trap enabled
focustrapTop.setAttribute("tabindex",0);focustrapBottom.setAttribute("tabindex",0);focustrapTop.addEventListener("focus",AUfocusTrapListenerTop);focustrapBottom.addEventListener("focus",AUfocusTrapListenerBottom);// Add key listener
document.addEventListener("keyup",AUkeyListener);if(typeof callbacks.afterOpen==="function"){callbacks.afterOpen()}}else{// Move the focus back to the menu button
openButton.focus();// Remove the focus trap
focustrapTop.removeAttribute("tabindex");focustrapBottom.removeAttribute("tabindex");// Remove the event listeners
focustrapTop.removeEventListener("focus",AUfocusTrapListenerTop);focustrapBottom.removeEventListener("focus",AUfocusTrapListenerBottom);// Remove the event listener for the keypress
document.removeEventListener("keyup",AUkeyListener);if(typeof callbacks.afterClose==="function"){callbacks.afterClose()}}// Toggle classes
ToggleClasses(element,state);ToggleClasses(document.body,state,"au-main-nav__scroll--unlocked","au-main-nav__scroll--locked");// Reset inline styles
menu.style.display="";menu.style.left="";overlay.style.display="";overlay.style.left="";overlay.style.opacity="";// Toggle the animating state to false so that we can allow toggling again
ToggleAnimationState()}})})(menu)}},{key:"render",value:function render(){var _this2=this;return _react.default.createElement("div",{id:this.id,className:"au-main-nav__content",ref:function ref(mainNavContent){_this2.mainNavContent=mainNavContent}},_react.default.createElement("button",{"aria-controls":this.id,onClick:function onClick(event){return _this2.toggle(event)},className:"au-main-nav__toggle au-main-nav__toggle--open"},"Menu"),_react.default.createElement("div",{className:"au-main-nav__menu",ref:function ref(mainNavMenu){_this2.mainNavMenu=mainNavMenu}},_react.default.createElement("div",{className:"au-main-nav__menu-inner"},_react.default.createElement("div",{className:"au-main-nav__focus-trap-top"}),_react.default.createElement("button",{"aria-controls":this.id,onClick:function onClick(event){return _this2.toggle(event)},className:"au-main-nav__toggle au-main-nav__toggle--close"},"Close"),_react.default.createElement(AUmainNavMenu,{linkComponent:this.props.linkComponent,items:this.props.items}),this.props.children,_react.default.createElement("div",{className:"au-main-nav__focus-trap-bottom"}))),_react.default.createElement("div",{"aria-controls":this.id,ref:function ref(mainNavOverlay){_this2.mainNavOverlay=mainNavOverlay},onClick:function onClick(event){return _this2.toggle(event)},className:"au-main-nav__overlay"}))}}]);return AUmainNavContent}(_react.default.PureComponent);exports.AUmainNavContent=AUmainNavContent;;AUmainNavContent.propTypes={dark:_propTypes.default.bool,alt:_propTypes.default.bool,children:_propTypes.default.node,speed:_propTypes.default.number,onOpen:_propTypes.default.func,afterOpen:_propTypes.default.func,onClose:_propTypes.default.func,afterClose:_propTypes.default.func,className:_propTypes.default.string};var AUmainNav=function AUmainNav(_ref2){var dark=_ref2.dark,alt=_ref2.alt,className=_ref2.className,ariaLabel=_ref2.ariaLabel,children=_ref2.children,attributeOptions=_objectWithoutProperties(_ref2,["dark","alt","className","ariaLabel","children"]);return _react.default.createElement("nav",_extends({className:"au-main-nav "+"".concat(dark?" au-main-nav--dark":"")+"".concat(alt?" au-main-nav--alt":"")+"".concat(className?" "+className:""),"aria-label":ariaLabel},attributeOptions),children)};AUmainNav.propTypes={dark:_propTypes.default.bool,alt:_propTypes.default.bool,ariaLabel:_propTypes.default.string,children:_propTypes.default.node.isRequired};AUmainNav.defaultProps={ariaLabel:"main"};var _default=AUmainNav;exports.default=_default;
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbInJlYWN0LmVzNS5qcyJdLCJuYW1lcyI6WyJBVW1haW5OYXZNZW51IiwiaXRlbXMiLCJsaW5rQ29tcG9uZW50IiwiR2VuZXJhdGVNZW51IiwibWVudSIsIm1hcCIsIml0ZW0iLCJsaW5rIiwiYWN0aXZlIiwidGV4dCIsImxpIiwiY2xhc3NOYW1lIiwicHJvcFR5cGVzIiwiUHJvcFR5cGVzIiwiYXJyYXlPZiIsInNoYXBlIiwic3RyaW5nIiwibm9kZSIsImlzUmVxdWlyZWQiLCJjaGlsZHJlbiIsImFycmF5Iiwib25lT2ZUeXBlIiwiZnVuYyIsImRlZmF1bHRQcm9wcyIsIklEdmFsdWUiLCJBVW1haW5OYXZDb250ZW50IiwicHJvcHMiLCJvbk9wZW4iLCJhZnRlck9wZW4iLCJvbkNsb3NlIiwiYWZ0ZXJDbG9zZSIsImF0dHJpYnV0ZU9wdGlvbnMiLCJ0b2dnbGVDbGFzc2VzIiwiYmluZCIsInJlbW92ZUNsYXNzIiwiYWRkQ2xhc3MiLCJtYWluTmF2VG9nZ2xlIiwidG9nZ2xlIiwidG9nZ2xlQW5pbWF0aW9uU3RhdGUiLCJzZXRTdGF0ZSIsImFuaW1hdGluZyIsInN0YXRlIiwiYXVGb2N1c1RyYXBMaXN0ZW5lclRvcCIsImF1Rm9jdXNUcmFwTGlzdGVuZXJCb3R0b20iLCJhdUtleUxpc3RlbmVyIiwiY2xvc2VkIiwiaWQiLCJldmVudCIsInByZXZlbnREZWZhdWx0IiwicHJldlByb3BzIiwicHJldlN0YXRlIiwidW5kZWZpbmVkIiwibWFpbk5hdkNvbnRlbnQiLCJzcGVlZCIsImVsZW1lbnQiLCJvcGVuaW5nQ2xhc3MiLCJjbG9zaW5nQ2xhc3MiLCJvbGRDbGFzcyIsIm5ld0NsYXNzIiwiY2xhc3NMaXN0IiwicmVtb3ZlIiwicmVwbGFjZSIsIlJlZ0V4cCIsInNwbGl0Iiwiam9pbiIsImFkZCIsImZvY3VzQ29udGVudCIsIm1haW5OYXZNZW51IiwicXVlcnlTZWxlY3RvckFsbCIsImxlbmd0aCIsImZvY3VzIiwib3ZlcmxheU9wZW4iLCJ3aW5kb3ciLCJnZXRDb21wdXRlZFN0eWxlIiwibWFpbk5hdk92ZXJsYXkiLCJnZXRQcm9wZXJ0eVZhbHVlIiwia2V5Q29kZSIsImNhbGxiYWNrcyIsImNhbmNlbEJ1YmJsZSIsInN0b3BQcm9wYWdhdGlvbiIsImVycm9yIiwib3ZlcmxheSIsImNsb3NlQnV0dG9uIiwicXVlcnlTZWxlY3RvciIsIm9wZW5CdXR0b24iLCJmb2N1c3RyYXBUb3AiLCJmb2N1c3RyYXBCb3R0b20iLCJtZW51V2lkdGgiLCJvZmZzZXRXaWR0aCIsIlRvZ2dsZUNsYXNzZXMiLCJBVWtleUxpc3RlbmVyIiwiQVVmb2N1c1RyYXBMaXN0ZW5lclRvcCIsIkFVZm9jdXNUcmFwTGlzdGVuZXJCb3R0b20iLCJUb2dnbGVBbmltYXRpb25TdGF0ZSIsInN0eWxlIiwiZGlzcGxheSIsIkFVIiwiYW5pbWF0ZSIsIlRvZ2dsZSIsInByb3BlcnR5Iiwib3BlblNpemUiLCJjbG9zZVNpemUiLCJwcmVmdW5jdGlvbiIsImxlZnQiLCJvcGFjaXR5IiwicG9zdGZ1bmN0aW9uIiwic2V0QXR0cmlidXRlIiwiYWRkRXZlbnRMaXN0ZW5lciIsImRvY3VtZW50IiwicmVtb3ZlQXR0cmlidXRlIiwicmVtb3ZlRXZlbnRMaXN0ZW5lciIsImJvZHkiLCJSZWFjdCIsIlB1cmVDb21wb25lbnQiLCJkYXJrIiwiYm9vbCIsImFsdCIsIm51bWJlciIsIkFVbWFpbk5hdiIsImFyaWFMYWJlbCJdLCJtYXBwaW5ncyI6InNIQVNBLG9EQUNBLDZEQUVBLGdFQUdBLG1FQU9BLDZCLG83RkFHQTs7Ozs7R0FNQSxHQUFNQSxDQUFBQSxhQUFhLENBQUcsUUFBaEJBLENBQUFBLGFBQWdCLE1BQThCLElBQTNCQyxDQUFBQSxLQUEyQixNQUEzQkEsS0FBMkIsQ0FBcEJDLGFBQW9CLE1BQXBCQSxhQUFvQixDQUNuRDtBQUNBLEdBQU1DLENBQUFBLFlBQVksQ0FBRyxRQUFmQSxDQUFBQSxZQUFlLENBQUVGLEtBQUYsQ0FBYSxDQUNqQyxHQUFNRyxDQUFBQSxJQUFJLENBQUdILEtBQUssQ0FBQ0ksR0FB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RyxNQUpXLENBSzVCMUYsTUFBTSxDQUFFZCxtQkFBVVMsSUFMVSxDQU01Qk0sU0FBUyxDQUFFZixtQkFBVVMsSUFOTyxDQU81Qk8sT0FBTyxDQUFFaEIsbUJBQVVTLElBUFMsQ0FRNUJRLFVBQVUsQ0FBRWpCLG1CQUFVUyxJQVJNLENBUzVCWCxTQUFTLENBQUVFLG1CQUFVRyxNQVRPLENBQTdCLENBYUEsR0FBTXNHLENBQUFBLFNBQVMsQ0FBRyxRQUFaQSxDQUFBQSxTQUFZLFdBQUdKLENBQUFBLElBQUgsT0FBR0EsSUFBSCxDQUFTRSxHQUFULE9BQVNBLEdBQVQsQ0FBY3pHLFNBQWQsT0FBY0EsU0FBZCxDQUF5QjRHLFNBQXpCLE9BQXlCQSxTQUF6QixDQUFvQ3BHLFFBQXBDLE9BQW9DQSxRQUFwQyxDQUFpRFksZ0JBQWpELHlGQUNqQiw4Q0FDQyxTQUFTLENBQ1IseUJBQ0ltRixJQUFJLENBQUcsb0JBQUgsQ0FBMEIsRUFEbEMsWUFFSUUsR0FBRyxDQUFHLG1CQUFILENBQXlCLEVBRmhDLFlBR0l6RyxTQUFTLENBQUcsSUFBTUEsU0FBVCxDQUFxQixFQUhsQyxDQUZGLENBT0MsYUFBZTRHLFNBUGhCLEVBUU14RixnQkFSTixFQVVHWixRQVZILENBRGlCLENBQWxCLENBZUFtRyxTQUFTLENBQUMxRyxTQUFWLENBQXNCLENBQ3JCc0csSUFBSSxDQUFFckcsbUJBQVVzRyxJQURLLENBRXJCQyxHQUFHLENBQUV2RyxtQkFBVXNHLElBRk0sQ0FHckJJLFNBQVMsQ0FBRTFHLG1CQUFVRyxNQUhBLENBSXJCRyxRQUFRLENBQUVOLG1CQUFVSSxJQUFWLENBQWVDLFVBSkosQ0FBdEIsQ0FPQW9HLFNBQVMsQ0FBQy9GLFlBQVYsQ0FBeUIsQ0FDeEJnRyxTQUFTLENBQUUsTUFEYSxDQUF6QixDLGFBSWVELFMiLCJzb3VyY2VzQ29udGVudCI6WyIvKiEgQGdvdi5hdS9tYWluLW5hdiB2MS4wLjcgKi9cbi8qKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKipcbiAqXG4gKiBtYWluTmF2IGZ1bmN0aW9uXG4gKlxuICogSG9yaXpvbnRhbCBsaXN0IG9mIGxpbmtzIHRvIGtleSBhcmVhcyBvbiB0aGUgd2Vic2l0ZS4gVXN1YWxseSBsb2NhdGVkIGluIHRoZSBoZWFkZXIuXG4gKlxuICoqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqL1xuXG5pbXBvcnQgUmVhY3QgZnJvbSAncmVhY3QnO1xuaW1wb3J0IFByb3BUeXBlcyBmcm9tICdwcm9wLXR5cGVzJztcblxuaW1wb3J0IEFVIGZyb20gJ0Bnb3YuYXUvYW5pbWF0ZSc7IC8vIGludGVyZGVwZW5kZW5jeSB3aXRoIG91ciBhbmltYXRlIGxpYlxuXG5cbmltcG9ydCBBVWxpbmtMaXN0IGZyb20gJ0Bnb3YuYXUvbGluay1saXN0Jztcbi8vIEVTNiBkZXBlbmRlbmN5OiBpbXBvcnQgQVVsaW5rTGlzdCBmcm9tICcuL2xpbmstbGlzdCc7XG5cblxuLy8gVGhlIGZvbGxvd2luZyBsaW5lIHdpbGwgYmUgcmVwbGFjZWQgYXV0b21hdGljYWxseSB3aXRoIGdlbmVyaWMgaW1wb3J0cyBmb3IgdGhlIEVTNSBwaXBlbGluZS5cbi8vIFlvdSBjYW4gc2FmZWx5IGlnbm9yZSB0aGlzIGJpdCBpZiB5b3UgdXNlIHRoaXMgbW9kdWxlIHdpdGggcGFuY2FrZVxuLy9cbmltcG9ydCAnLi4vY3NzL3N0eWxlcy5jc3MnO1xuXG5cbi8qKlxuICogQSBtZW51IGluc2lkZSB0aGUgQVVtYWluTmF2XG4gKlxuICogQHBhcmFtICB7YXJyYXl9ICBpdGVtcyAgICAgICAgICAgIC0gVGhlIGxpbmtzIGluIGFuIGFycmF5IGNvbnRhaW5pbmcgdGV4dCwgbG9jYXRpb24gYW5kIGFjdGl2ZSBzdGF0dXNcbiAqIEBwYXJhbSAge3N0cmluZ30gbGlua0NvbXBvbmVudCAgICAtIFRoZSBjb21wb25lbnQgdXNlZCBmb3IgdGhlIGxpbmtcbiAqL1xuY29uc3QgQVVtYWluTmF2TWVudSA9ICh7IGl0ZW1zLCBsaW5rQ29tcG9uZW50IH0pID0+IHtcblx0Ly8gR2VuZXJhdGUgdGhlIG1lbnVcblx0Y29uc3QgR2VuZXJhdGVNZW51ID0gKCBpdGVtcyApID0+IHtcblx0XHRjb25zdCBtZW51ID0gaXRlbXMubWFwKCBpdGVtID0+IHtcblx0XHRcdGNvbnN0IGxpbmsgPSAgaXRlbS5hY3RpdmUgPyB7XG5cdFx0XHRcdGxpbms6IGl0ZW0ubGluayxcblx0XHRcdFx0dGV4dDogaXRlbS50ZXh0LFxuXHRcdFx0XHQnYXJpYS1jdXJyZW50JzogJ3BhZ2UnLFxuXHRcdFx0XHRsaToge1xuXHRcdFx0XHRcdGNsYXNzTmFtZTogJ2FjdGl2ZScsXG5cdFx0XHRcdH0sXG5cdFx0XHR9IDpcblx0XHRcdHtcblx0XHRcdFx0bGluazogaXRlbS5saW5rLFxuXHRcdFx0XHR0ZXh0OiBpdGVtLnRleHQsXG5cdFx0XHR9O1xuXG5cdFx0XHQvLyByZXR1cm4gdGhlIGxpbmssIG1heWJlIHdpdGggY2hpbGRyZW5cblx0XHRcdHJldHVybiBsaW5rO1xuXHRcdH0pO1xuXG5cdFx0cmV0dXJuIG1lbnU7XG5cdH1cblxuXHQvLyBDcmVhdGUgdGhlIG1lbnUgd2l0aCBjaGlsZHJlblxuXHRyZXR1cm4gKFxuXHRcdDxBVWxpbmtMaXN0IGl0ZW1zPXsgR2VuZXJhdGVNZW51KCBpdGVtcyApIH0gbGlua0NvbXBvbmVudD17IGxpbmtDb21wb25lbnQgfSAvPlxuXHQpO1xufVxuXG5cbkFVbWFpbk5hdk1lbnUucHJvcFR5cGVzID0ge1xuXHRpdGVtczogUHJvcFR5cGVzLmFycmF5T2YoXG5cdFx0UHJvcFR5cGVzLnNoYXBlKHtcblx0XHRcdGxpbms6IFByb3BUeXBlcy5zdHJpbmcsXG5cdFx0XHR0ZXh0OiBQcm9wVHlwZXMubm9kZS5pc1JlcXVpcmVkLFxuXHRcdFx0Y2hpbGRyZW46IFByb3BUeXBlcy5hcnJheSxcblx0XHR9KVxuXHQpLmlzUmVxdWlyZWQsXG5cdGxpbmtDb21wb25lbnQ6IFByb3BUeXBlcy5vbmVPZlR5cGUoWyBQcm9wVHlwZXMuc3RyaW5nLCBQcm9wVHlwZXMuZnVuYyBdKSxcbn07XG5cbkFVbWFpbk5hdk1lbnUuZGVmYXVsdFByb3BzID0ge1xuXHRsaW5rQ29tcG9uZW50OiAnYScsXG59O1xuXG5cbi8vIFRoaXMgdmFsdWUgZ2V0cyBpbmNyZWFzZWQgZm9yIGVhY2ggbmF2aWdhdGlvbiBjb21wb25lbnRcbmxldCBJRHZhbHVlID0gMDtcblxuXG5leHBvcnQgY2xhc3MgQVVtYWluTmF2Q29udGVudCBleHRlbmRzIFJlYWN0LlB1cmVDb21wb25lbnQge1xuXHRjb25zdHJ1Y3RvciggcHJvcHMgKSB7XG5cdFx0c3VwZXIoIHByb3BzICk7XG5cblx0XHRjb25zdCB7XG5cdFx0XHRpdGVtcyxcblx0XHRcdGNsYXNzTmFtZSA9ICcnLFxuXHRcdFx0Y2hpbGRyZW4sXG5cdFx0XHRsaW5rQ29tcG9uZW50LFxuXHRcdFx0b25PcGVuLFxuXHRcdFx0YWZ0ZXJPcGVuLFxuXHRcdFx0b25DbG9zZSxcblx0XHRcdGFmdGVyQ2xvc2UsXG5cdFx0XHQuLi5hdHRyaWJ1dGVPcHRpb25zXG5cdFx0fSA9IHByb3BzO1xuXG5cdFx0Ly8gRnVuY3Rpb25zXG5cdFx0dGhpcy50b2dnbGVDbGFzc2VzICAgICAgICA9IHRoaXMudG9nZ2xlQ2xhc3Nlcy5iaW5kKCB0aGlzICk7XG5cdFx0dGhpcy5yZW1vdmVDbGFzcyAgICAgICAgICA9IHRoaXMucmVtb3ZlQ2xhc3MuYmluZCggdGhpcyApO1xuXHRcdHRoaXMuYWRkQ2xhc3MgICAgICAgICAgICAgPSB0aGlzLmFkZENsYXNzLmJpbmQoIHRoaXMgKTtcblx0XHR0aGlzLm1haW5OYXZUb2dnbGUgICAgICAgID0gdGhpcy5tYWluTmF2VG9nZ2xlLmJpbmQoIHRoaXMgKTtcblx0XHR0aGlzLnRvZ2dsZSAgICAgICAgICAgICAgID0gdGhpcy50b2dnbGUuYmluZCggdGhpcyApO1xuXHRcdHRoaXMudG9nZ2xlQW5pbWF0aW9uU3RhdGUgPSBmdW5jdGlvbigpIHtcblx0XHRcdHRoaXMuc2V0U3RhdGUoeyBhbmltYXRpbmc6ICF0aGlzLnN0YXRlLmFuaW1hdGluZyB9IClcblx0XHR9LmJpbmQoIHRoaXMgKTtcblxuXG5cdFx0Ly8gRXZlbnQgbGlzdGVuZXJzXG5cdFx0dGhpcy5hdUZvY3VzVHJhcExpc3RlbmVyVG9wICAgID0gdGhpcy5hdUZvY3VzVHJhcExpc3RlbmVyVG9wLmJpbmQoIHRoaXMgKTtcblx0XHR0aGlzLmF1Rm9jdXNUcmFwTGlzdGVuZXJCb3R0b20gPSB0aGlzLmF1Rm9jdXNUcmFwTGlzdGVuZXJCb3R0b20uYmluZCggdGhpcyApO1xuXHRcdHRoaXMuYXVLZXlMaXN0ZW5lciAgICAgICAgICAgICA9IHRoaXMuYXVLZXlMaXN0ZW5lci5iaW5kKCB0aGlzICk7XG5cblxuXHRcdC8vIFZhcmlhYmxlc1xuXHRcdHRoaXMuc3RhdGUgPSB7XG5cdFx0XHRjbG9zZWQ6IHRydWUsXG5cdFx0XHRhbmltYXRpbmc6IGZhbHNlLFxuXHRcdH07XG5cblxuXHRcdC8vIEluY3JlYXNlIHRoZSBJRCBzbyBpdCdzIHVuaXF1ZSBmb3IgZWFjaCBpbnN0YW5jZVxuXHRcdElEdmFsdWUgKz0gMTtcblx0XHR0aGlzLmlkID0gYGF1LW1haW4tbmF2LSR7IElEdmFsdWUgfWA7XG5cdH1cblxuXG5cdC8qKlxuXHQgKiBUb2dnbGUgYW4gbWFpbiBuYXZpZ2F0aW9uIG9uIGNsaWNrXG5cdCAqXG5cdCAqIEBwYXJhbSAge2V2ZW50IG9iamVjdH0gZXZlbnQgLSBUaGUgZXZlbnQgb2JqZWN0IG9mIHRoZSBjbGlja1xuXHQgKi9cblx0dG9nZ2xlKCBldmVudCApIHtcblx0XHRldmVudC5wcmV2ZW50RGVmYXVsdCgpO1xuXG5cdFx0Ly8gSWYgdGhlIG1haW4gbWVudSBpcyBhbmltYXRpbmcgZG9uJ3QgY2hhbmdlIHRvZ2dsZSB0aGUgbWVudVxuXHRcdGlmKCB0aGlzLnN0YXRlLmFuaW1hdGluZyApe1xuXHRcdFx0cmV0dXJuO1xuXHRcdH1cblxuXHRcdC8vIFRvZ2dsZSB0aGUgbWVudSdzIGN1cnJlbnQgc3RhdGVcblx0XHR0aGlzLnNldFN0YXRlKHtcblx0XHRcdGNsb3NlZDogIXRoaXMuc3RhdGUuY2xvc2VkLFxuXHRcdFx0YW5pbWF0aW5nOiB0cnVlLFxuXHRcdH0pO1xuXHR9XG5cblxuXHQvKipcblx0ICogY29tcG9uZW50RGlkVXBkYXRlIC0gVXBkYXRlIHRoZSBjb21wb25lbnQgd2hlbiBpdCBjaGFuZ2VzXG5cdCAqXG5cdCAqIEBwYXJhbSB7Kn0gcHJldlByb3BzIC0gVGhlIHByZXZpb3VzIHByb3BlcnR5IHZhbHVlc1xuXHQgKiBAcGFyYW0geyp9IHByZXZTdGF0ZSAtIFRoZSBwcmV2aW91cyBzdGF0ZSB2YWx1ZXNcblx0ICovXG5cdGNvbXBvbmVudERpZFVwZGF0ZSggcHJldlByb3BzLCBwcmV2U3RhdGUgKXtcblx0XHRpZiggcHJldlN0YXRlICE9PSB1bmRlZmluZWQgJiYgdGhpcy5zdGF0ZSAhPT0gdW5kZWZpbmVkICYmIHRoaXMuc3RhdGUuY2xvc2VkICE9PSBwcmV2U3RhdGUuY2xvc2VkICkge1xuXHRcdFx0dGhpcy5tYWluTmF2VG9nZ2xlKCB0aGlzLm1haW5OYXZDb250ZW50LCB0aGlzLnByb3BzLnNwZWVkLCB7XG5cdFx0XHRcdG9uT3BlbjogdGhpcy5wcm9wcy5vbk9wZW4sXG5cdFx0XHRcdGFmdGVyT3BlbjogdGhpcy5wcm9wcy5hZnRlck9wZW4sXG5cdFx0XHRcdG9uQ2xvc2U6IHRoaXMucHJvcHMub25DbG9zZSxcblx0XHRcdFx0YWZ0ZXJDbG9zZTogdGhpcy5wcm9wcy5hZnRlckNsb3NlLFxuXHRcdFx0fSk7XG5cdFx0fVxuXHR9XG5cblxuXHQvKipcblx0ICogSUU4IGNvbXBhdGlibGUgZnVuY3Rpb24gZm9yIHJlcGxhY2luZyBjbGFzc2VzIG9uIGEgRE9NIG5vZGVcblx0ICpcblx0ICogQHBhcmFtICB7b2JqZWN0fSBlbGVtZW50ICAgICAgIC0gVGhlIERPTSBlbGVtZW50IHdlIHdhbnQgdG8gdG9nZ2xlIGNsYXNzZXMgb25cblx0ICogQHBhcmFtICB7c3RyaW5nfSBvcGVuaW5nQ2xhc3MgIC0gVGhlIGZpcnN0Q2xhc3MgeW91IHdhbnQgdG8gdG9nZ2xlIG9uIHRoZSBET00gbm9kZVxuXHQgKiBAcGFyYW0gIHtzdHJpbmd9IGNsb3NpbmdDbGFzcyAgLSBUaGUgc2Vjb25kQ2xhc3MgeW91IHdhbnQgdG8gdG9nZ2xlIG9uIHRoZSBET00gbm9kZVxuXHQgKi9cblx0dG9nZ2xlQ2xhc3NlcyggZWxlbWVudCwgc3RhdGUsIG9wZW5pbmdDbGFzcywgY2xvc2luZ0NsYXNzICkge1xuXHRcdGlmKCBzdGF0ZSA9PT0gJ29wZW5pbmcnIHx8IHN0YXRlID09PSAnb3BlbicgKSB7XG5cdFx0XHR2YXIgb2xkQ2xhc3MgPSBvcGVuaW5nQ2xhc3MgfHwgJ2F1LW1haW4tbmF2X19jb250ZW50LS1jbG9zZWQnO1xuXHRcdFx0dmFyIG5ld0NsYXNzID0gY2xvc2luZ0NsYXNzIHx8ICdhdS1tYWluLW5hdl9fY29udGVudC0tb3Blbic7XG5cdFx0fVxuXHRcdGVsc2Uge1xuXHRcdFx0dmFyIG9sZENsYXNzID0gY2xvc2luZ0NsYXNzIHx8ICdhdS1tYWluLW5hdl9fY29udGVudC0tb3Blbic7XG5cdFx0XHR2YXIgbmV3Q2xhc3MgPSBvcGVuaW5nQ2xhc3MgfHwgJ2F1LW1haW4tbmF2X19jb250ZW50LS1jbG9zZWQnO1xuXHRcdH1cblxuXHRcdHRoaXMucmVtb3ZlQ2xhc3MoIGVsZW1lbnQsIG9sZENsYXNzICk7XG5cdFx0dGhpcy5hZGRDbGFzcyggZWxlbWVudCwgbmV3Q2xhc3MgKTtcblx0fVxuXG5cblx0LyoqXG5cdCAqIElFOCBjb21wYXRpYmxlIGZ1bmN0aW9uIGZvciByZW1vdmluZyBhIGNsYXNzXG5cdCAqXG5cdCAqIEBwYXJhbSAge29iamVjdH0gZWxlbWVudCAgIC0gVGhlIERPTSBlbGVtZW50IHdlIHdhbnQgdG8gbWFuaXB1bGF0ZVxuXHQgKiBAcGFyYW0gIHtvYmplY3R9IGNsYXNzTmFtZSAtIFRoZSBuYW1lIG9mIHRoZSBjbGFzcyB0byBiZSByZW1vdmVkXG5cdCAqL1xuXHRyZW1vdmVDbGFzcyggZWxlbWVudCwgY2xhc3NOYW1lICkge1xuXHRcdGlmKCBlbGVtZW50LmNsYXNzTGlzdCApIHtcblx0XHRcdGVsZW1lbnQuY2xhc3NMaXN0LnJlbW92ZSggY2xhc3NOYW1lICk7XG5cdFx0fVxuXHRcdGVsc2Uge1xuXHRcdFx0ZWxlbWVudC5jbGFzc05hbWUgPSBlbGVtZW50LmNsYXNzTmFtZS5yZXBsYWNlKCBuZXcgUmVnRXhwKFwiKF58XFxcXGIpXCIgKyBjbGFzc05hbWUuc3BsaXQoXCIgXCIpLmpvaW4oXCJ8XCIpICsgXCIoXFxcXGJ8JClcIiwgXCJnaVwiKSwgXCIgXCIgKTtcblx0XHR9XG5cdH1cblxuXG5cdC8qKlxuXHQgKiBJRTggY29tcGF0aWJsZSBmdW5jdGlvbiBmb3IgYWRkaW5nIGEgY2xhc3Ncblx0ICpcblx0ICogQHBhcmFtICB7b2JqZWN0fSBlbGVtZW50ICAgLSBUaGUgRE9NIGVsZW1lbnQgd2Ugd2FudCB0byBtYW5pcHVsYXRlXG5cdCAqIEBwYXJhbSAge29iamVjdH0gY2xhc3NOYW1lIC0gVGhlIG5hbWUgb2YgdGhlIGNsYXNzIHRvIGJlIGFkZGVkXG5cdCAqL1xuXHRhZGRDbGFzcyggZWxlbWVudCwgY2xhc3NOYW1lICkge1xuXHRcdGlmKCBlbGVtZW50LmNsYXNzTGlzdCApIHtcblx0XHRcdGVsZW1lbnQuY2xhc3NMaXN0LmFkZCggY2xhc3NOYW1lICk7XG5cdFx0fVxuXHRcdGVsc2Uge1xuXHRcdFx0ZWxlbWVudC5jbGFzc05hbWUgPSBlbGVtZW50LmNsYXNzTmFtZSArIFwiIFwiICsgY2xhc3NOYW1lO1xuXHRcdH1cblx0fVxuXG5cblx0LyoqXG5cdCAqIGF1Rm9jdXNUcmFwTGlzdGVuZXJUb3AgLSBXaGF0IGhhcHBlbnMgd2hlbiB0aGUgZm9jdXMgdHJhcCB0b3AgZ2V0cyBmb2N1c1xuXHQgKlxuXHQgKiBAcGFyYW0ge2V2ZW50fSBldmVudCAtIHRoZSBldmVudFxuXHQgKi9cblx0YXVGb2N1c1RyYXBMaXN0ZW5lclRvcCggZXZlbnQgKSB7XG5cdFx0dmFyIGZvY3VzQ29udGVudCA9IHRoaXMubWFpbk5hdk1lbnUucXVlcnlTZWxlY3RvckFsbCggJ2EsIC5hdS1tYWluLW5hdl9fdG9nZ2xlJyApO1xuXHRcdGZvY3VzQ29udGVudFsgZm9jdXNDb250ZW50Lmxlbmd0aCAtIDEgXS5mb2N1cygpO1xuXHR9XG5cblxuXHQvKipcblx0ICogYXVGb2N1c1RyYXBMaXN0ZW5lckJvdHRvbSAtIFdoYXQgaGFwcGVucyB3aGVuIHRoZSBmb2N1cyB0cmFwIGJvdHRvbSBnZXRzIGZvY3VzXG5cdCAqXG5cdCAqIEBwYXJhbSB7ZXZlbnR9IGV2ZW50IC0gdGhlIGV2ZW50XG5cdCAqL1xuXHRhdUZvY3VzVHJhcExpc3RlbmVyQm90dG9tKCBldmVudCApIHtcblx0XHR2YXIgZm9jdXNDb250ZW50ID0gdGhpcy5tYWluTmF2TWVudS5xdWVyeVNlbGVjdG9yQWxsKCAnYSwgLmF1LW1haW4tbmF2X190b2dnbGUnICk7XG5cdFx0Zm9jdXNDb250ZW50WyAwIF0uZm9jdXMoKTtcblx0fVxuXG5cblx0LyoqXG5cdCAqIGF1S2V5TGlzdGVuZXIgLSBXaGF0IGhhcHBlbnMgd2hlbiBhIGtleSBnZXRzIHByZXNzZWQgYW5kIHRoZSBtZW51IGlzIG9wZW5cblx0ICpcblx0ICogQHBhcmFtIHtldmVudH0gZXZlbnQgLSB0aGUgZXZlbnRcblx0ICovXG5cdGF1S2V5TGlzdGVuZXIoIGV2ZW50ICkge1xuXHRcdC8vIFRoaXMgc2hvdWxkIG9ubHkgY2xvc2UgdGhlIG1lbnUgd2hlbiB0aGUgbWVudSBpcyB2aXNpYmx5IG9wZW5cblx0XHR2YXIgb3ZlcmxheU9wZW4gPSB3aW5kb3cuZ2V0Q29tcHV0ZWRTdHlsZSggdGhpcy5tYWluTmF2T3ZlcmxheSApLmdldFByb3BlcnR5VmFsdWUoICdkaXNwbGF5JyApO1xuXG5cdFx0Ly8gQ2hlY2sgdGhlIG1lbnUgaXMgb3BlbiBhbmQgdmlzaWJsZSBhbmQgdGhlIGVzY2FwZSBrZXkgaXMgcHJlc3NlZFxuXHRcdGlmKCBldmVudC5rZXlDb2RlID09PSAyNyAmJiBvdmVybGF5T3BlbiA9PT0gJ2Jsb2NrJyApIHtcblx0XHRcdHRoaXMudG9nZ2xlKCBldmVudCApO1xuXHRcdH1cblx0fVxuXG5cblx0LyoqXG5cdCAqIFRvZ2dsZSBhIG1haW5OYXYgZWxlbWVudFxuXHQgKlxuXHQgKiBAcGFyYW0gIHtzdHJpbmd9ICBlbGVtZW50ICAtIFRoZSB0b2dnbGUgZm9yIHRoZSBtYWluIG5hdlxuXHQgKiBAcGFyYW0gIHtpbnRlZ2VyfSBzcGVlZCAgICAtIFRoZSBzcGVlZCBpbiBtcyBmb3IgdGhlIGFuaW1hdGlvblxuXHQgKlxuXHQgKi9cblx0bWFpbk5hdlRvZ2dsZSggZWxlbWVudCwgc3BlZWQsIGNhbGxiYWNrcyApIHtcblx0XHQvLyBzdG9wIGV2ZW50IHByb3BhZ2F0aW9uXG5cdFx0dHJ5IHtcblx0XHRcdHdpbmRvdy5ldmVudC5jYW5jZWxCdWJibGUgPSB0cnVlO1xuXHRcdFx0ZXZlbnQuc3RvcFByb3BhZ2F0aW9uKCk7XG5cdFx0fVxuXHRcdGNhdGNoKCBlcnJvciApIHt9XG5cblx0XHQvLyBjaGVjayB0aGlzIG9uY2Vcblx0XHRpZiggdHlwZW9mIGNhbGxiYWNrcyAhPSAnb2JqZWN0JyApIHtcblx0XHRcdGNhbGxiYWNrcyA9IHt9O1xuXHRcdH1cblxuXG5cdFx0Ly8gRWxlbWVudHMgd2UgbW9kaWZ5XG5cdFx0dmFyIG1lbnUgICAgICAgICAgICA9IHRoaXMubWFpbk5hdk1lbnU7XG5cdFx0dmFyIG92ZXJsYXkgICAgICAgICA9IHRoaXMubWFpbk5hdk92ZXJsYXk7XG5cdFx0dmFyIGNsb3NlQnV0dG9uICAgICA9IGVsZW1lbnQucXVlcnlTZWxlY3RvciggJy5hdS1tYWluLW5hdl9fdG9nZ2xlLS1jbG9zZScgKTtcblx0XHR2YXIgb3BlbkJ1dHRvbiAgICAgID0gZWxlbWVudC5xdWVyeVNlbGVjdG9yKCAnLmF1LW1haW4tbmF2X190b2dnbGUtLW9wZW4nICk7XG5cdFx0dmFyIGZvY3VzdHJhcFRvcCAgICA9IGVsZW1lbnQucXVlcnlTZWxlY3RvciggJy5hdS1tYWluLW5hdl9fZm9jdXMtdHJhcC10b3AnICk7XG5cdFx0dmFyIGZvY3VzdHJhcEJvdHRvbSA9IGVsZW1lbnQucXVlcnlTZWxlY3RvciggJy5hdS1tYWluLW5hdl9fZm9jdXMtdHJhcC1ib3R0b20nICk7XG5cblx0XHR2YXIgY2xvc2VkICAgICAgICAgID0gIXRoaXMuc3RhdGUuY2xvc2VkO1xuXHRcdHZhciBzdGF0ZSAgICAgICAgICAgPSBjbG9zZWQgPyAnb3BlbmluZycgOiAnJztcblx0XHR2YXIgbWVudVdpZHRoICAgICAgID0gbWVudS5vZmZzZXRXaWR0aDtcblxuXG5cdFx0Ly8gRnVuY3Rpb25zXG5cdFx0dmFyIFRvZ2dsZUNsYXNzZXMgICAgICAgICAgICAgPSB0aGlzLnRvZ2dsZUNsYXNzZXM7XG5cdFx0dmFyIEFVa2V5TGlzdGVuZXIgICAgICAgICAgICAgPSB0aGlzLmF1S2V5TGlzdGVuZXI7XG5cdFx0dmFyIEFVZm9jdXNUcmFwTGlzdGVuZXJUb3AgICAgPSB0aGlzLmF1Rm9jdXNUcmFwTGlzdGVuZXJUb3A7XG5cdFx0dmFyIEFVZm9jdXNUcmFwTGlzdGVuZXJCb3R0b20gPSB0aGlzLmF1Rm9jdXNUcmFwTGlzdGVuZXJCb3R0b207XG5cdFx0dmFyIFRvZ2dsZUFuaW1hdGlvblN0YXRlICAgICAgPSB0aGlzLnRvZ2dsZUFuaW1hdGlvblN0YXRlO1xuXG5cblx0XHRvdmVybGF5LnN0eWxlLmRpc3BsYXkgPSAnYmxvY2snO1xuXG5cblx0XHQoZnVuY3Rpb24oIG1lbnUgKSB7XG5cdFx0XHRBVS5hbmltYXRlLlRvZ2dsZSh7XG5cdFx0XHRcdGVsZW1lbnQ6IG1lbnUsXG5cdFx0XHRcdHByb3BlcnR5OiAnbGVmdCcsXG5cdFx0XHRcdG9wZW5TaXplOiAwLFxuXHRcdFx0XHRjbG9zZVNpemU6IC0xICogbWVudVdpZHRoLFxuXHRcdFx0XHRzcGVlZDogc3BlZWQgfHwgMjUwLFxuXHRcdFx0XHRwcmVmdW5jdGlvbjogZnVuY3Rpb24oICkge1xuXHRcdFx0XHRcdC8vIFNldCB0aGVzZSB2YWx1ZSBpbW1lZGlhdGVseSBmb3IgdHJhbnNpdGlvbnNcblx0XHRcdFx0XHRpZiggc3RhdGUgPT09ICdvcGVuaW5nJyApIHtcblx0XHRcdFx0XHRcdG1lbnUuc3R5bGUuZGlzcGxheSAgICA9ICdibG9jayc7XG5cdFx0XHRcdFx0XHRvdmVybGF5LnN0eWxlLmxlZnQgICAgPSAwO1xuXHRcdFx0XHRcdFx0b3ZlcmxheS5zdHlsZS5vcGFjaXR5ID0gMC41O1xuXG5cdFx0XHRcdFx0XHQvLyBydW4gd2hlbiBvcGVuaW5nXG5cdFx0XHRcdFx0XHRpZiggdHlwZW9mIGNhbGxiYWNrcy5vbk9wZW4gPT09ICdmdW5jdGlvbicgKSB7XG5cdFx0XHRcdFx0XHRcdGNhbGxiYWNrcy5vbk9wZW4oKTtcblx0XHRcdFx0XHRcdH1cblx0XHRcdFx0XHR9XG5cdFx0XHRcdFx0ZWxzZSB7XG5cdFx0XHRcdFx0XHRvdmVybGF5LnN0eWxlLm9wYWNpdHkgPSAnMCc7XG5cblx0XHRcdFx0XHRcdC8vIHJ1biB3aGVuIGNsb3Npbmdcblx0XHRcdFx0XHRcdGlmKCB0eXBlb2YgY2FsbGJhY2tzLm9uQ2xvc2UgPT09ICdmdW5jdGlvbicgKSB7XG5cdFx0XHRcdFx0XHRcdGNhbGxiYWNrcy5vbkNsb3NlKCk7XG5cdFx0XHRcdFx0XHR9XG5cdFx0XHRcdFx0fVxuXHRcdFx0XHR9LFxuXHRcdFx0XHRwb3N0ZnVuY3Rpb246IGZ1bmN0aW9uKCl7XG5cdFx0XHRcdFx0aWYgKCBzdGF0ZSA9PT0gJ29wZW5pbmcnICl7XG5cblx0XHRcdFx0XHRcdC8vIE1vdmUgdGhlIGZvY3VzIHRvIHRoZSBjbG9zZSBidXR0b25cblx0XHRcdFx0XHRcdGNsb3NlQnV0dG9uLmZvY3VzKCk7XG5cblxuXHRcdFx0XHRcdFx0Ly8gRm9jdXMgdHJhcCBlbmFibGVkXG5cdFx0XHRcdFx0XHRmb2N1c3RyYXBUb3Auc2V0QXR0cmlidXRlKCBcInRhYmluZGV4XCIsIDAgKTtcblx0XHRcdFx0XHRcdGZvY3VzdHJhcEJvdHRvbS5zZXRBdHRyaWJ1dGUoIFwidGFiaW5kZXhcIiwgMCApO1xuXG5cblx0XHRcdFx0XHRcdGZvY3VzdHJhcFRvcC5hZGRFdmVudExpc3RlbmVyKCAnZm9jdXMnLCBBVWZvY3VzVHJhcExpc3RlbmVyVG9wICk7XG5cdFx0XHRcdFx0XHRmb2N1c3RyYXBCb3R0b20uYWRkRXZlbnRMaXN0ZW5lciggJ2ZvY3VzJywgQVVmb2N1c1RyYXBMaXN0ZW5lckJvdHRvbSApO1xuXG5cdFx0XHRcdFx0XHQvLyBBZGQga2V5IGxpc3RlbmVyXG5cdFx0XHRcdFx0XHRkb2N1bWVudC5hZGRFdmVudExpc3RlbmVyKCAna2V5dXAnLCBBVWtleUxpc3RlbmVyICk7XG5cblx0XHRcdFx0XHRcdGlmKCB0eXBlb2YgY2FsbGJhY2tzLmFmdGVyT3BlbiA9PT0gJ2Z1bmN0aW9uJyApIHtcblx0XHRcdFx0XHRcdFx0Y2FsbGJhY2tzLmFmdGVyT3BlbigpO1xuXHRcdFx0XHRcdFx0fVxuXHRcdFx0XHRcdH1cblx0XHRcdFx0XHRlbHNlIHtcblx0XHRcdFx0XHRcdC8vIE1vdmUgdGhlIGZvY3VzIGJhY2sgdG8gdGhlIG1lbnUgYnV0dG9uXG5cdFx0XHRcdFx0XHRvcGVuQnV0dG9uLmZvY3VzKCk7XG5cblx0XHRcdFx0XHRcdC8vIFJlbW92ZSB0aGUgZm9jdXMgdHJhcFxuXHRcdFx0XHRcdFx0Zm9jdXN0cmFwVG9wLnJlbW92ZUF0dHJpYnV0ZSggXCJ0YWJpbmRleFwiICk7XG5cdFx0XHRcdFx0XHRmb2N1c3RyYXBCb3R0b20ucmVtb3ZlQXR0cmlidXRlKCBcInRhYmluZGV4XCIgKTtcblxuXG5cdFx0XHRcdFx0XHQvLyBSZW1vdmUgdGhlIGV2ZW50IGxpc3RlbmVyc1xuXHRcdFx0XHRcdFx0Zm9jdXN0cmFwVG9wLnJlbW92ZUV2ZW50TGlzdGVuZXIoICdmb2N1cycsIEFVZm9jdXNUcmFwTGlzdGVuZXJUb3AgKTtcblx0XHRcdFx0XHRcdGZvY3VzdHJhcEJvdHRvbS5yZW1vdmVFdmVudExpc3RlbmVyKCAnZm9jdXMnLCBBVWZvY3VzVHJhcExpc3RlbmVyQm90dG9tICk7XG5cblxuXHRcdFx0XHRcdFx0Ly8gUmVtb3ZlIHRoZSBldmVudCBsaXN0ZW5lciBmb3IgdGhlIGtleXByZXNzXG5cdFx0XHRcdFx0XHRkb2N1bWVudC5yZW1vdmVFdmVudExpc3RlbmVyKCAna2V5dXAnLCBBVWtleUxpc3RlbmVyICk7XG5cblx0XHRcdFx0XHRcdGlmKCB0eXBlb2YgY2FsbGJhY2tzLmFmdGVyQ2xvc2UgPT09ICdmdW5jdGlvbicgKSB7XG5cdFx0XHRcdFx0XHRcdGNhbGxiYWNrcy5hZnRlckNsb3NlKCk7XG5cdFx0XHRcdFx0XHR9XG5cdFx0XHRcdFx0fVxuXG5cblx0XHRcdFx0XHQvLyBUb2dnbGUgY2xhc3Nlc1xuXHRcdFx0XHRcdFRvZ2dsZUNsYXNzZXMoIGVsZW1lbnQsIHN0YXRlICk7XG5cdFx0XHRcdFx0VG9nZ2xlQ2xhc3Nlcyhcblx0XHRcdFx0XHRcdGRvY3VtZW50LmJvZHksXG5cdFx0XHRcdFx0XHRzdGF0ZSxcblx0XHRcdFx0XHRcdCdhdS1tYWluLW5hdl9fc2Nyb2xsLS11bmxvY2tlZCcsXG5cdFx0XHRcdFx0XHQnYXUtbWFpbi1uYXZfX3Njcm9sbC0tbG9ja2VkJyxcblx0XHRcdFx0XHQpO1xuXG5cblx0XHRcdFx0XHQvLyBSZXNldCBpbmxpbmUgc3R5bGVzXG5cdFx0XHRcdFx0bWVudS5zdHlsZS5kaXNwbGF5ICAgID0gJyc7XG5cdFx0XHRcdFx0bWVudS5zdHlsZS5sZWZ0ICAgICAgID0gJyc7XG5cdFx0XHRcdFx0b3ZlcmxheS5zdHlsZS5kaXNwbGF5ID0gJyc7XG5cdFx0XHRcdFx0b3ZlcmxheS5zdHlsZS5sZWZ0ICAgID0gJyc7XG5cdFx0XHRcdFx0b3ZlcmxheS5zdHlsZS5vcGFjaXR5ID0gJyc7XG5cblxuXHRcdFx0XHRcdC8vIFRvZ2dsZSB0aGUgYW5pbWF0aW5nIHN0YXRlIHRvIGZhbHNlIHNvIHRoYXQgd2UgY2FuIGFsbG93IHRvZ2dsaW5nIGFnYWluXG5cdFx0XHRcdFx0VG9nZ2xlQW5pbWF0aW9uU3RhdGUoKTtcblx0XHRcdFx0fSxcblx0XHRcdH0pO1xuXHRcdH0pKCBtZW51ICk7XG5cdH1cblxuXG5cdHJlbmRlcigpe1xuXHRcdHJldHVybiAoXG5cdFx0XHQ8ZGl2XG5cdFx0XHRcdGlkPXsgdGhpcy5pZCB9XG5cdFx0XHRcdGNsYXNzTmFtZT1cImF1LW1haW4tbmF2X19jb250ZW50XCJcblx0XHRcdFx0cmVmPXsgbWFpbk5hdkNvbnRlbnQgPT4geyB0aGlzLm1haW5OYXZDb250ZW50ID0gbWFpbk5hdkNvbnRlbnQgfX0+XG5cdFx0XHRcdDxidXR0b25cblx0XHRcdFx0XHRhcmlhLWNvbnRyb2xzPXsgdGhpcy5pZCB9XG5cdFx0XHRcdFx0b25DbGljaz17ICggZXZlbnQgKSA9PiB0aGlzLnRvZ2dsZSggZXZlbnQgKSB9XG5cdFx0XHRcdFx0Y2xhc3NOYW1lPVwiYXUtbWFpbi1uYXZfX3RvZ2dsZSBhdS1tYWluLW5hdl9fdG9nZ2xlLS1vcGVuXCI+XG5cdFx0XHRcdFx0TWVudVxuXHRcdFx0XHQ8L2J1dHRvbj5cblx0XHRcdFx0PGRpdlxuXHRcdFx0XHRcdGNsYXNzTmFtZT1cImF1LW1haW4tbmF2X19tZW51XCJcblx0XHRcdFx0XHRyZWY9eyBtYWluTmF2TWVudSA9PiB7IHRoaXMubWFpbk5hdk1lbnUgPSBtYWluTmF2TWVudSB9fVxuXHRcdFx0XHRcdD5cblx0XHRcdFx0XHQ8ZGl2IGNsYXNzTmFtZT1cImF1LW1haW4tbmF2X19tZW51LWlubmVyXCI+XG5cdFx0XHRcdFx0XHQ8ZGl2IGNsYXNzTmFtZT1cImF1LW1haW4tbmF2X19mb2N1cy10cmFwLXRvcFwiPjwvZGl2PlxuXHRcdFx0XHRcdFx0PGJ1dHRvblxuXHRcdFx0XHRcdFx0XHRhcmlhLWNvbnRyb2xzPXsgdGhpcy5pZCB9XG5cdFx0XHRcdFx0XHRcdG9uQ2xpY2s9eyAoIGV2ZW50ICkgPT4gdGhpcy50b2dnbGUoIGV2ZW50ICkgfVxuXHRcdFx0XHRcdFx0XHRjbGFzc05hbWU9XCJhdS1tYWluLW5hdl9fdG9nZ2xlIGF1LW1haW4tbmF2X190b2dnbGUtLWNsb3NlXCI+XG5cdFx0XHRcdFx0XHRcdENsb3NlXG5cdFx0XHRcdFx0XHQ8L2J1dHRvbj5cblx0XHRcdFx0XHRcdDxBVW1haW5OYXZNZW51XG5cdFx0XHRcdFx0XHRcdGxpbmtDb21wb25lbnQ9eyB0aGlzLnByb3BzLmxpbmtDb21wb25lbnQgfVxuXHRcdFx0XHRcdFx0XHRpdGVtcz17IHRoaXMucHJvcHMuaXRlbXMgfVxuXHRcdFx0XHRcdFx0Lz5cblx0XHRcdFx0XHRcdHsgdGhpcy5wcm9wcy5jaGlsZHJlbiB9XG5cdFx0XHRcdFx0XHQ8ZGl2IGNsYXNzTmFtZT1cImF1LW1haW4tbmF2X19mb2N1cy10cmFwLWJvdHRvbVwiPjwvZGl2PlxuXHRcdFx0XHRcdDwvZGl2PlxuXHRcdFx0XHQ8L2Rpdj5cblx0XHRcdFx0PGRpdlxuXHRcdFx0XHRcdGFyaWEtY29udHJvbHM9eyB0aGlzLmlkIH1cblx0XHRcdFx0XHRyZWY9eyBtYWluTmF2T3ZlcmxheSA9PiB7IHRoaXMubWFpbk5hdk92ZXJsYXkgPSBtYWluTmF2T3ZlcmxheSB9fVxuXHRcdFx0XHRcdG9uQ2xpY2s9eyAoIGV2ZW50ICkgPT4gdGhpcy50b2dnbGUoIGV2ZW50ICkgfVxuXHRcdFx0XHRcdGNsYXNzTmFtZT1cImF1LW1haW4tbmF2X19vdmVybGF5XCI+PC9kaXY+XG5cdFx0XHQ8L2Rpdj5cblx0XHQpO1xuXHR9XG59O1xuXG5BVW1haW5OYXZDb250ZW50LnByb3BUeXBlcyA9IHtcblx0ZGFyazogUHJvcFR5cGVzLmJvb2wsXG5cdGFsdDogUHJvcFR5cGVzLmJvb2wsXG5cdGNoaWxkcmVuOiBQcm9wVHlwZXMubm9kZSxcblx0c3BlZWQ6IFByb3BUeXBlcy5udW1iZXIsXG5cdG9uT3BlbjogUHJvcFR5cGVzLmZ1bmMsXG5cdGFmdGVyT3BlbjogUHJvcFR5cGVzLmZ1bmMsXG5cdG9uQ2xvc2U6IFByb3BUeXBlcy5mdW5jLFxuXHRhZnRlckNsb3NlOiBQcm9wVHlwZXMuZnVuYyxcblx0Y2xhc3NOYW1lOiBQcm9wVHlwZXMuc3RyaW5nLFxufTtcblxuXG5jb25zdCBBVW1haW5OYXYgPSAoeyBkYXJrLCBhbHQsIGNsYXNzTmFtZSwgYXJpYUxhYmVsLCBjaGlsZHJlbiwgLi4uYXR0cmlidXRlT3B0aW9ucyB9KSA9PiAoXG5cdDxuYXZcblx0XHRjbGFzc05hbWU9e1xuXHRcdFx0J2F1LW1haW4tbmF2ICcgK1xuXHRcdFx0YCR7IGRhcmsgPyAnIGF1LW1haW4tbmF2LS1kYXJrJyA6ICcnIH1gICtcblx0XHRcdGAkeyBhbHQgPyAnIGF1LW1haW4tbmF2LS1hbHQnIDogJycgfWAgK1xuXHRcdFx0YCR7IGNsYXNzTmFtZSA/ICcgJyArIGNsYXNzTmFtZSA6ICcnIH1gXG5cdFx0fVxuXHRcdGFyaWEtbGFiZWwgPSB7IGFyaWFMYWJlbCB9XG5cdFx0eyAuLi5hdHRyaWJ1dGVPcHRpb25zIH1cblx0PlxuXHRcdHsgY2hpbGRyZW4gfVxuXHQ8L25hdj5cbik7XG5cbkFVbWFpbk5hdi5wcm9wVHlwZXMgPSB7XG5cdGRhcms6IFByb3BUeXBlcy5ib29sLFxuXHRhbHQ6IFByb3BUeXBlcy5ib29sLFxuXHRhcmlhTGFiZWw6IFByb3BUeXBlcy5zdHJpbmcsXG5cdGNoaWxkcmVuOiBQcm9wVHlwZXMubm9kZS5pc1JlcXVpcmVkLFxufTtcblxuQVVtYWluTmF2LmRlZmF1bHRQcm9wcyA9IHtcblx0YXJpYUxhYmVsOiAnbWFpbicsXG59O1xuXG5leHBvcnQgZGVmYXVsdCBBVW1haW5OYXY7XG4iXX0=